  {% extends "skeleton.html" %}

  {% block custom_style %}
  <style>
      .sError { position: relative; display: none; }
  </style>
  {% endblock %}
  {% block header %}
    <div id="header" class="sBd-BlueH sWidth-100p">
          <div class="sContainer sMargin-Auto">
          <div class="sHeaderWrapper">
              <div class="sHeaderBox sHeaderBox-WmMenu sFloat-R sPos-Rel"> 
                  <input type="checkbox" id="sWmInput" class="sInputH">
                  <label for="sWmInput" class="sUnderpants sFloat-R sPos-Rel sZi-2"></label>
                  <div class="sOverHidden-All sTextAlign-L">
                      <span class="sVAlign-50p sPos-Rel sZi-2">
                          {{ user.username }}
                      </span>
                  </div> 
                  <div class="sWmMenu sPos-Rel sZi-1">
                      <span class="sWmMenuSpace"></span>
                      <a href="/cabinet-webmaster/">Настройки</a>
                      <a href="/logout/">Выйти</a>
                  </div>
              </div>
              <div class="sHeaderBox sHeaderBox-Money sFloat-R sPos-Rel">
                  <div class="sOverHidden-All">
                      <a href="javascript:return false;" class="sWmMoney sFloat-L"></a>
                      <span class="sVAlign-50p sPos-Rel">
                          {{ user.cabinet_webmaster.money }} p.                    
                      </span>
                  </div> 
              </div>
              <div class="sHeaderBox sHeaderBox-Menu sFloat-R sPos-Rel">
                  <input type="checkbox" id="sHeaderMenuInput" class="sInputH">
                  <div class="sOverHidden-All">
                      <a href="/webmaster-area/" class="sVAlign-50p">Площадки</a>
                      <a href="/buttons-constructor/" class="sVAlign-50p">Конструктор</a>
                      <a href="/webmaster-area/statistic/" class="sVAlign-50p">Статистика</a>
                      <a href="javascript:return false;" class="sVAlign-50p">Рефералы</a>
                      <a href="javascript:return false;" class="sVAlign-50p">FAQ</a>
                  </div>                
                  <label for="sHeaderMenuInput" class="sUnderpants sFloat-R sPos-Rel sZi-2"></label> 
                  <div class="sMenu-Dd sPos-Rel sZi-1">
                      <span class="sWmMenuSpace"></span>
                      <a href="javascript:return false;">Конструктор</a>
                      <a href="javascript:return false;">Статистика</a>
                      <a href="javascript:return false;">Рефералы</a>
                      <a href="javascript:return false;">FAQ</a>
                  </div>
              </div>
              <div class="sHeaderBox sHeaderBox-Logo sFloat-L sPos-Rel">
                  <a href="/" class="sFloat-L">
                      Sharing
                  </a>
              </div>
          </div>
          </div>
      </div>
  {% endblock %}

  {% block title %}{{ page.title }}{% endblock %}

	{% block content %}
  <div class="sContent-PB">
      <div class="sContainer sMargin-Auto">
          <div class="sBtnConstructor">    
              <div class="sH1Wrapper">
                    <h1 class="sH1 sFloat-L">{{ page.header }}</h1>
                    <div class="sClear-Both"></div>
              </div>
              {% if areas.count = 0 %}
              <span class="sTextAlign-C sDisabled">Кнопки</span>
              <span class="sTextAlign-C sDisabled">Реклама</span>
              {% else %}
              <span class="sTextAlign-C">Кнопки</span>
              <span class="sTextAlign-C">Реклама</span>
              {% endif %}
              <div class="sGLine"></div>
              <div class="sTopLine">
                  <a href="/webmaster-area/" class="sFloat-L">Площадки</a>
                  <div class="sAreaSelectWrapper">
                       {% if areas.count = 0 %} 
                       <select form="createConst" class="sDisabled" name="webmaster_area">
                       {% else %}
                       <select form="createConst" name="webmaster_area">
                       {% endif %}
                          <option value="all">Любые</option>
                          {% for a in areas %}
                          <option value="{{ a.pk }}">{{ a.name_area }}</option>
                          {% endfor %}
                       </select>
                   </div>
                   {% if areas.count = 0 %}
                   <a style="right: -160px; position: relative; bottom: 28px; color: rgb(255, 174, 0); text-decoration: underline dotted rgb(255, 174, 0) ! important;" class="" href="/webmaster-area/?create">Создать площадку</a>
                   {% endif %}
                   <span onclick="formSubmit()" id="SaveConfig" class="sSaveConfig" >Сохранить конфигурацию</span>
                  <div style="clear:both;"></div>
              </div>
              {% if areas.count = 0 %}
              <div class="sStepPad sFloat-L sDisabled">
              {% else %}
              <div class="sStepPad sFloat-L">
              {% endif %}
                  <div class="sActive" id="Step-1"><span>Шаг 1</span><span class="sActive"></span>   
                  </div>
                  <div id="Step-2"><span>Шаг 2</span><span data-sneedsubmit="true"></span></div>
                  <div id="Step-3"><span>Шаг 3</span><span></span></div>
              </div>
              {% if areas.count = 0 %}
              <div class="sFormPad sFloat-R sDisabled">
              {% else %}
              <div class="sFormPad sFloat-R">
              {% endif %}
                  <div class="sFormPad-Wrapper">
                      <div class="sDescription">
                          <p>1. Настройте вид и параметры кнопок</p>
                          <p>2. Скопируйте и установите полученный код в HTML-вёрстку сайте туда, где хотите разместисть кнопки</p>               
                      </div>

                      <div class="sBSExample sFloat-L">
                          <p>Выберите стиль кнопок</p>
                          {% for b in btns_images %}
                          <div class="sBSTreeWrapper">
                              {% if b.pk == 1 %}
                              <input form="createConst" name="btns_images" value="{{ b.pk }}">
                              <span class="sBSInput sBSInput-Checked"></span>
                              {% else %}
                              <input form="createConst" value="{{ b.pk }}">
                              <span class="sBSInput"></span>
                              {% endif %}
                              <span data-sn="tw" class="sBSNode sBSNode-{{ b.pk }}"></span>
                              <span data-sn="vk" class="sBSNode sBSNode-{{ b.pk }}"></span>
                              <span data-sn="od" class="sBSNode sBSNode-{{ b.pk }}"></span>
                              <span data-sn="fb" class="sBSNode sBSNode-{{ b.pk }}"></span>
                              <span data-sn="gp" class="sBSNode sBSNode-{{ b.pk }}"></span>
                              <span data-sn="ma" class="sBSNode sBSNode-{{ b.pk }}"></span>
                              <span data-sn="li" class="sBSNode sBSNode-{{ b.pk }}"></span>
                              <span data-sn="lj" class="sBSNode sBSNode-{{ b.pk }}"></span>
                              <span data-logo="e" class="sBSNode"></span>
                          </div>
                          {% endfor %}
                      </div>

                      <div class="sSNExample sFloat-R">
                          <p>Доступны к выбору</p>
                          {% for sn in social_networks %}
                          {% if sn.pk <= 8 %}
                          <div class="sSNTreeWrapper">            
                            <input form="createConst" id="sn-{{ sn.shortcut }}" type="checkbox" name="social_networks" value="{{ sn.shortcut }}">
                            <label for="sn-{{ sn.shortcut }}" class="sSNInput"></label>
                            <span>{{ sn.shortcut }}</span>
                           </div>
                          {% endif %}
                          {% endfor %}
                      </div>                      

                      <div style="clear:both;"></div>
                      <div class="sNext">
                          <span data-next>Далее</span>
                      </div>
                  </div>   
                  
                  <div class="sFormPad-Wrapper sHideAndSeek">
                      <div class="sDescription">
                          <p class="Step-2">Предпросмотр</p>        
                      </div>      
                      <div class="sShowBtns">
                          <div id="sharewallContainer">
                              <a data-share-sn="vk" href="javascript:return false;" style="width:41px; height:41px; display:inline-block; margin-right:15px; background-image: url(../../static/sharewall-template/images/btns-sprite-1.png); background-repeat: no-repeat; background-position: -41px 0px;"></a><a data-share-sn="fb" href="javascript:return false;" style="width:41px; height:41px; display:inline-block; margin-right:15px; background-image: url(../../static/sharewall-template/images/btns-sprite-1.png); background-repeat: no-repeat; background-position: -123px 0px;"></a><a data-share-sn="tw" href="javascript:return false;" style="width:41px; height:41px; display:inline-block; margin-right:15px; background-image: url(../../static/sharewall-template/images/btns-sprite-1.png); background-repeat: no-repeat; background-position: 0px 0px;"></a><a data-share-sn="od" href="javascript:return false;" style="width:41px; height:41px; display:inline-block; margin-right:15px; background-image: url(../../static/sharewall-template/images/btns-sprite-1.png); background-repeat: no-repeat; background-position: -82px 0px;"></a><a data-share-sn="gp" href="javascript:return false;" style="width:41px; height:41px; display:inline-block; margin-right:15px; background-image: url(../../static/sharewall-template/images/btns-sprite-1.png); background-repeat: no-repeat; background-position: -164px 0px;"></a><a data-share-sn="ma" href="javascript:return false;" style="width:41px; height:41px; display:inline-block; margin-right:15px; background-image: url(../../static/sharewall-template/images/btns-sprite-1.png); background-repeat: no-repeat; background-position: -205px 0px;"></a><a data-share-sn="li" href="javascript:return false;" style="width:41px; height:41px; display:inline-block; margin-right:15px; background-image: url(../../static/sharewall-template/images/btns-sprite-1.png); background-repeat: no-repeat; background-position: -246px 0px;"></a><a data-share-sn="lj" href="javascript:return false;" style="width:41px; height:41px; display:inline-block; margin-right:15px; background-image: url(../../static/sharewall-template/images/btns-sprite-1.png); background-repeat: no-repeat; background-position: -287px 0px;"></a><a target="_blank" href="javascript:return false;" style="width:41px; height:41px; display:inline-block; margin-right:15px; background-image: url(../../static/sharewall-template/images/btns-logo-sharewall-blue.png); background-repeat: no-repeat; background-position: 50% 50%;"></a><span id="shareCounter" style="margin-left:3px; height:41px; width:64px; display:inline-block; color:#fff; font: 400 14px / 22px Roboto; text-align:center; line-height:41px; vertical-align: top; background-image: url(../../static/sharewall-template/images/btns-counter-black.png); background-repeat: no-repeat; background-position: 50% 60%;">15,5 k</span>
                          </div>
                      </div>
                      <div class="sToolsBar">
                          <div class="sSizeChoices-Wrapper">
                              <input form="createConst" hidden="hidden" name="size_buttons" type="text" value="MED">
                              <span onclick="setSize(this)" data-size="BIG">Большие</span>
                               <span class="sActive" onclick="setSize(this)" data-size="MED">Средние</span>
                               <span onclick="setSize(this)" data-size="SML">Мелкие</span>
                          </div>
                          <div class="sLocationChoices-Wrapper">
                              <div class="sFloat-L">
                                  <input form="createConst" hidden="hidden" name="form_buttons" type="text" value="CI">
                                   <span class="sActive" onclick="setForm(this)" data-form="CI">Круглые</span>
                                   <span onclick="setForm(this)" data-form="SQ">Квадратные</span>
                              </div>
                              <div class="sFloat-R">
                                  <input form="createConst" hidden="hidden" name="location_buttons" type="text" value="HO">
                                   <span class="sActive" onclick="setLocation(this)" data-location="HO">Горизонтально</span>
                                   <span onclick="setLocation(this)" data-location="VE">Вертикально</span>
                              </div>
                              <div class="sClear-Both"></div>
                          </div>
                          <div class="sCounterChoices-Wrapper">
                              <div class="sFloat-L">
                                  <input form="createConst" hidden="hidden" checked="checked" name="with_counter" type="checkbox">
                                   <span class="sActive" onclick="setCounter(this)" data-counter="true">С счетчиком</span>
                                   <span onclick="setCounter(this)" data-counter="false">Без счетчика</span>
                              </div>
                              <div class="sFloat-R">
                                  <input form="createConst" hidden="hidden" name="with_background" type="checkbox">
                                   <span onclick="setBackground(this)" data-background="true">С фоном</span>
                                   <span class="sActive" onclick="setBackground(this)" data-background="false">Без фона</span>
                              </div>
                              <div class="sClear-Both"></div>
                          </div>
                          <div style="margin-top:39px;">
                              <div class="sSNTreeWrapper">            
                                <input id="mobileView" form="createConst" name="mobile_view" type="checkbox">
                                <label for="mobileView" class="sSNInput"></label>
                                <span>Мобильный вид</span>
                               </div>
                          </div>
                          
                      </div>
                      <div class="sNext sNext2">
                          <span data-prev>Назад</span>
                          <span data-next>Далее</span>
                      </div>
                  </div>   
                  
                  <div class="sFormPad-Wrapper sHideAndSeek">
                      <div class="sDescription2">Код для копирования</div>     
                       <div class="sDescription2 sDescription2-Short">Дополнительно*</div>
                      <div class="sCopyCodeWrapper sFloat-L">
                       <p id="sCodeHere" style="padding:40px;"></p>
                      </div>  
                      <div class="sAdditionalWrapper sFloat-R">
                          <label for="page_url">Ссылка на страницу</label>
                          <input id="page_url" name="page_url" type="url" value="" form="createConst">
                          <label for="page_title">Название страницы</label>
                          <input id="page_title" name="page_title" type="text" value="" form="createConst">
                          <label for="page_description">Краткое описание страницы</label>
                          <textarea id="page_description" name="page_description" f orm="createConst"></textarea>
                          <p>
                              *Основные социальные сети берут название, описание и изображение только из meta-тегов на самой странице. Добавляйте себе на сайт необходимые meta-теги.
                          </p>
                      </div> 
                      <div class="sClear-Both"></div>
                      <div class="sCodeDescription">
                          <p>Скопируйте и установите этот код в HTML-верстку вашего сайта в том месте, где хотите расположить социальные кнопки</p>
                          <span onclick="copyToClipboard()" class="sSaveConfig-Big"></span>
                          <p class="sNote">Публикуя код, вы принимаете 
                              <a href="javascript: return false;">пользовательское соглашение</a>
                          </p>
                      </div>
                  </div>  
              </div>
              <div style="clear:both;"></div>
              <div class="sError">  
                  {% if success %}
                  {{ success }}
                  {% endif %}
                  {% if error %}
                  {{ error }}
                  {% endif %}
              </div>
              <form id="createConst" style="display:none; opacity:0; margin-left:-99999px;" method="post" action="/buttons-constructor/create/">
                  {% csrf_token %}
                  <input type="submit" value="Create">
              </form>
          </div>
      </div>
  </div>
	{% endblock %}

  {% block footer %}
       <div id="footer" class="sBd-GrayF sWidth-100p">
          <div class="sContainer sMargin-Auto">
          <div class="sFooterWrapper">
              <div class="sFooterBox sFooterBox-Logo sFloat-L sPos-Rel">
                  <a href="/" class="sFloat-L">
                      Sharing
                  </a>
              </div>
              <div class="sFooterBox sFooterBox-Sn sFloat-R sPos-Rel">
                  <div class="sOverHidden-All">
                      <a href="javascript:return false;" class="sFloat-L sSn sSn-Fb">              </a>
                      <a href="javascript:return false;" class="sFloat-L sSn sSn-Tw">              </a>
                      <a href="javascript:return false;" class="sFloat-L sSn sSn-Vk">              </a>
                      <a href="javascript:return false;" class="sFloat-L sSn sSn-Ok">              </a>
                  </div>
              </div>
              <div class="sFooterBox sFooterBox-Menu sFloat-R sPos-Rel">
                  <div class="sOverHidden-All">
                      <a href="javascript:return false;" class="sVAlign-50p">
                          Вебмастеру
                      </a>
                      <a href="javascript:return false;" class="sVAlign-50p">
                          Возможности
                      </a>
                      <a href="javascript:return false;" class="sVAlign-50p">
                          FAQ
                      </a>
                  </div>
              </div>
          </div>
           </div>
        </div>
        <script>
        $(function(){
            $('div.sBSTreeWrapper').click(function(){ $this = $(this); $this.parent().find('div.sBSTreeWrapper span.sBSInput').removeClass('sBSInput-Checked'); $this.find('span.sBSInput').toggleClass('sBSInput-Checked'); $this.parent().find('div.sBSTreeWrapper input').attr('name',''); $this.find('input').attr('name','btns_images'); 
            var spriteNumber = $this.find('input').attr('value');
            $('#sharewallContainer > a:not(:last-of-type').css("background-image", 'url("http://localhost/static/sharewall-template/images/btns-sprite-'+spriteNumber+'.png")');
            });
            $('div.sSNTreeWrapper input').prop('checked','checked');
            $('div.sSNTreeWrapper span').click(function(){ $this = $(this); var isChecked = $this.parent().find('input').prop('checked'); $this.parent().find('input').prop('checked', !isChecked).change(); });
            $('div.sSNTreeWrapper input').change(function(){ $this = $(this); var sn = $this.attr('value'); $('div.sBSTreeWrapper span.sBSNode[data-sn='+sn+']').toggle(); });
            $('div.sNext > span[data-next]').click(function(){ $cStep = $('.sStepPad > div.sActive').next('div').toggleClass('sActive').find('span:nth-child(2)').toggleClass('sActive').parent().prev('div').toggleClass('sActive').find('span:nth-child(2)').toggleClass('sActive');
            $('div.sFormPad > div.sFormPad-Wrapper:not(.sHideAndSeek)').next('div').toggleClass('sHideAndSeek').prev('div').toggleClass('sHideAndSeek'); 
            StepForward($cStep);
            });  
            $('div.sNext > span[data-prev]').click(function(){ $cStep = $('.sStepPad > div.sActive').prev('div').toggleClass('sActive').find('span:nth-child(2)').toggleClass('sActive').parent().next('div').toggleClass('sActive').find('span:nth-child(2)').toggleClass('sActive');
            $('div.sFormPad > div.sFormPad-Wrapper:not(.sHideAndSeek)').prev('div').toggleClass('sHideAndSeek').next('div').toggleClass('sHideAndSeek');       
            });  
            var codeTextNode = document.createTextNode("<div id='sharewallContainer'></div><script src='//sharewall.ru/webmaster-area/getconfig'>"+"</scrip"+"t>");
                document.getElementById('sCodeHere').appendChild(codeTextNode);
            var StepForward = function(e){                
                if($(e).data("sneedsubmit")){
                    $('#SaveConfig').show();
                }
            }
            $('input[name="mobile_view"]').prop('checked', false);
        });
        function formSubmit(){
            $('form input[type="submit"]').click();
        }
        function copyToClipboard(element="#sCodeHere") {
          var $temp = $("<input>");
          $("body").append($temp);
          $temp.val($(element).text()).select();
          document.execCommand("copy");
          $temp.remove();
        }
        function setSize(e){
            $this = $(e);
            $parent = $this.parent();            $parent.find('span').removeClass('sActive').parent().find('input[name="size_buttons"]').attr("value", $this.data("size"));
            $this.addClass("sActive");
        }
        function setForm(e){
            $this = $(e);
            $parent = $this.parent();            $parent.find('span').removeClass('sActive').parent().find('input[name="form_buttons"]').attr("value", $this.data("form"));
            $this.addClass("sActive");
        }
        function setLocation(e){
            $this = $(e);
            $parent = $this.parent();            $parent.find('span').removeClass('sActive').parent().find('input[name="location_buttons"]').attr("value", $this.data("location"));
            $this.addClass("sActive");
        }
        function setCounter(e){
            $this = $(e);
            $parent = $this.parent();            $parent.find('span').removeClass('sActive').parent().find('input[name="with_counter"]').prop("checked", $this.data("counter"));
            $this.addClass("sActive");
            ($this.data("counter"))? $('#sharewallContainer > span').show() : $('#sharewallContainer > span').hide();
        }
        function setBackground(e){
            $this = $(e);
            $parent = $this.parent();            $parent.find('span').removeClass('sActive').parent().find('input[name="with_background"]').prop("checked", $this.data("background"));
            $this.addClass("sActive");
        }
            
        </script>
  {% endblock %}
