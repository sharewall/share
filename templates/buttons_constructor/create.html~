  {% extends "skeleton.html" %}

  {% block custom_style %}
  <style>
      .sError { position: relative; display: none; }
  </style>
  {% endblock %}
  {% block header %}
    <div id="header" class="sBd-BlueH sWidth-100p">
          <div class="sContainer sMargin-Auto">
          <div class="sHeaderWrapper">
              <div class="sHeaderBox sHeaderBox-WmMenu sFloat-R sPos-Rel"> 
                  <input type="checkbox" id="sWmInput" class="sInputH">
                  <label for="sWmInput" class="sUnderpants sFloat-R sPos-Rel sZi-2"></label>
                  <div class="sOverHidden-All sTextAlign-L">
                      <span class="sVAlign-50p sPos-Rel sZi-2">
                          {{ user.username }}
                      </span>
                  </div> 
                  <div class="sWmMenu sPos-Rel sZi-1">
                      <span class="sWmMenuSpace"></span>
                      <a href="/cabinet-webmaster/">Настройки</a>
                      <a href="/logout/">Выйти</a>
                  </div>
              </div>
              <div class="sHeaderBox sHeaderBox-Money sFloat-R sPos-Rel">
                  <div class="sOverHidden-All">
                      <a href="javascript:return false;" class="sWmMoney sFloat-L"></a>
                      <span class="sVAlign-50p sPos-Rel">
                          {{ user.cabinet_webmaster.money }} p.                    
                      </span>
                  </div> 
              </div>
              <div class="sHeaderBox sHeaderBox-Menu sFloat-R sPos-Rel">
                  <input type="checkbox" id="sHeaderMenuInput" class="sInputH">
                  <div class="sOverHidden-All">
                      <a href="/webmaster-area/" class="sVAlign-50p">Площадки</a>
                      <a href="/buttons-constructor/" class="sVAlign-50p">Конструктор</a>
                      <a href="/webmaster-area/statistic/" class="sVAlign-50p">Статистика</a>
                      <a href="javascript:return false;" class="sVAlign-50p">Рефералы</a>
                      <a href="javascript:return false;" class="sVAlign-50p">FAQ</a>
                  </div>                
                  <label for="sHeaderMenuInput" class="sUnderpants sFloat-R sPos-Rel sZi-2"></label> 
                  <div class="sMenu-Dd sPos-Rel sZi-1">
                      <span class="sWmMenuSpace"></span>
                      <a href="javascript:return false;">Конструктор</a>
                      <a href="javascript:return false;">Статистика</a>
                      <a href="javascript:return false;">Рефералы</a>
                      <a href="javascript:return false;">FAQ</a>
                  </div>
              </div>
              <div class="sHeaderBox sHeaderBox-Logo sFloat-L sPos-Rel">
                  <a href="/" class="sFloat-L">
                      Sharing
                  </a>
              </div>
          </div>
          </div>
      </div>
  {% endblock %}

  {% block title %}{{ page.title }}{% endblock %}

	{% block content %}
  <div class="sContent-PB">
      <div class="sContainer sMargin-Auto">
          <div class="sBtnConstructor">    
              <div class="sH1Wrapper">
                    <h1 class="sH1 sFloat-L">{{ page.header }}</h1>
                    <div class="sClear-Both"></div>
              </div>
              {% if areas.count = 0 %}
              <span class="sTextAlign-C sDisabled">Кнопки</span>
              <span class="sTextAlign-C sDisabled">Реклама</span>
              {% else %}
              <span class="sTextAlign-C">Кнопки</span>
              <span class="sTextAlign-C">Реклама</span>
              {% endif %}
              <div class="sTopLine">
                  <a href="/webmaster-area/" class="sFloat-L">Площадки</a>
                  <div class="sAreaSelectWrapper">
                       {% if areas.count = 0 %} 
                       <select class="sDisabled" name="webmaster_area">
                       {% else %}
                       <select name="webmaster_area">
                       {% endif %}
                          <option value="all">Любые</option>
                          {% for a in areas %}
                          <option value="{{ a.pk }}">{{ a.name_area }}</option>
                          {% endfor %}
                       </select>
                   </div>
                   {% if areas.count = 0 %}
                   <a style="right: -160px; position: relative; bottom: 28px; color: rgb(255, 174, 0); text-decoration: underline dotted rgb(255, 174, 0) ! important;" class="" href="/webmaster-area/?create">Создать площадку</a>
                   {% endif %}
                   <span onclick="formSubmit()" id="SaveConfig" class="sSaveConfig" >Сохранить конфигурацию</span>
                  <div style="clear:both;"></div>
              </div>
              {% if areas.count = 0 %}
              <div class="sStepPad sFloat-L sDisabled">
              {% else %}
              <div class="sStepPad sFloat-L">
              {% endif %}
                  <div class="sActive" id="Step-1"><span>Шаг 1</span><span class="sActive"></span>   
                  </div>
                  <div id="Step-2"><span>Шаг 2</span><span data-sneedsubmit="true"></span></div>
                  <div id="Step-3"><span>Шаг 3</span><span></span></div>
              </div>
              {% if areas.count = 0 %}
              <div class="sFormPad sFloat-R sDisabled">
              {% else %}
              <div class="sFormPad sFloat-R">
              {% endif %}
                  <div class="sFormPad-Wrapper">
                      <div class="sDescription">
                          <p>1. Настройте вид и параметры кнопок</p>
                          <p>2. Скопируйте и установите полученный код в HTML-вёрстку сайте туда, где хотите разместисть кнопки</p>               
                      </div>

                      <div class="sBSExample sFloat-L">
                          <p>Выберите стиль кнопок</p>
                          {% for b in btns_images %}
                          <div class="sBSTreeWrapper">
                              {% if b.pk == 1 %}
                              <input form="createConst" name="btns_images" value="{{ b.pk }}">
                              <span class="sBSInput sBSInput-Checked"></span>
                              {% else %}
                              <input form="createConst" value="{{ b.pk }}">
                              <span class="sBSInput"></span>
                              {% endif %}
                              <span data-sn="tw" class="sBSNode"></span>
                              <span data-sn="vk" class="sBSNode"></span>
                              <span data-sn="od" class="sBSNode"></span>
                              <span data-sn="fb" class="sBSNode"></span>
                              <span data-sn="gp" class="sBSNode"></span>
                              <span data-sn="ma" class="sBSNode"></span>
                              <span data-sn="li" class="sBSNode"></span>
                              <span data-sn="lj" class="sBSNode"></span>
                              <span data-logo="e" class="sBSNode"></span>
                          </div>
                          {% endfor %}
                      </div>

                      <div class="sSNExample sFloat-R">
                          <p>Доступны к выбору</p>
                          {% for sn in social_networks %}
                          {% if sn.pk <= 8 %}
                          <div class="sSNTreeWrapper">            
                            <input form="createConst" id="sn-{{ sn.shortcut }}" type="checkbox" name="social_networks" value="{{ sn.shortcut }}">
                            <label for="sn-{{ sn.shortcut }}" class="sSNInput"></label>
                            <span>{{ sn.shortcut }}</span>
                           </div>
                          {% endif %}
                          {% endfor %}
                      </div>                      

                      <div style="clear:both;"></div>
                      <div class="sNext">
                          <span data-next>Далее</span>
                      </div>
                  </div>   
                  
                  <div class="sFormPad-Wrapper sHideAndSeek">
                      <div class="sDescription">Предпросмотр        
                      </div>                                          
                      <div class="sNext sNext2">
                          <span data-prev>Назад</span>
                          <span data-next>Далее</span>
                      </div>
                  </div>   
                  
                  <div class="sFormPad-Wrapper sHideAndSeek">
                      <div class="sDescription2">Код для копирования</div>     
                       <div class="sDescription2 sDescription2-Short">Дополнительно*</div>
                      <div class="sCopyCodeWrapper sFloat-L">
                       <p id="sCodeHere" style="padding:40px;"></p>
                      </div>  
                      <div class="sAdditionalWrapper sFloat-R">
                          <label for="page_url">Ссылка на страницу</label>
                          <input id="page_url" name="page_url" type="url" value="" form="createConst">
                          <label for="page_title">Название страницы</label>
                          <input id="page_title" name="page_title" type="text" value="" form="createConst">
                          <label for="page_description">Краткое описание</label>
                          <textarea id="page_description" name="page_description" form="createConst"></textarea>
                      </div> 
                      <div class="sClear-Both"></div>
                      <div class="sCodeDescription">
                      
                      </div>
                  </div>  
              </div>
              <div style="clear:both;"></div>
              <div class="sError">  
                  {% if success %}
                  {{ success }}
                  {% endif %}
                  {% if error %}
                  {{ error }}
                  {% endif %}
              </div>
              <form id="createConst" style="display:none; opacity:0; margin-left:-99999px;" method="post" action="/buttons-constructor/create/">
                  {% csrf_token %}
                  <input type="submit" value="Create">
                  <input type="text" name="location_buttons" value="HO">

              </form>
          </div>
      </div>
  </div>
	{% endblock %}

  {% block footer %}
       <div id="footer" class="sBd-GrayF sWidth-100p">
          <div class="sContainer sMargin-Auto">
          <div class="sFooterWrapper">
              <div class="sFooterBox sFooterBox-Logo sFloat-L sPos-Rel">
                  <a href="/" class="sFloat-L">
                      Sharing
                  </a>
              </div>
              <div class="sFooterBox sFooterBox-Sn sFloat-R sPos-Rel">
                  <div class="sOverHidden-All">
                      <a href="javascript:return false;" class="sFloat-L sSn sSn-Fb">              </a>
                      <a href="javascript:return false;" class="sFloat-L sSn sSn-Tw">              </a>
                      <a href="javascript:return false;" class="sFloat-L sSn sSn-Vk">              </a>
                      <a href="javascript:return false;" class="sFloat-L sSn sSn-Ok">              </a>
                  </div>
              </div>
              <div class="sFooterBox sFooterBox-Menu sFloat-R sPos-Rel">
                  <div class="sOverHidden-All">
                      <a href="javascript:return false;" class="sVAlign-50p">
                          Вебмастеру
                      </a>
                      <a href="javascript:return false;" class="sVAlign-50p">
                          Возможности
                      </a>
                      <a href="javascript:return false;" class="sVAlign-50p">
                          FAQ
                      </a>
                  </div>
              </div>
          </div>
           </div>
        </div>
        <script>
        $(function(){
            $('div.sBSTreeWrapper').click(function(){ $this = $(this); $this.parent().find('div.sBSTreeWrapper span.sBSInput').removeClass('sBSInput-Checked'); $this.find('span.sBSInput').toggleClass('sBSInput-Checked'); $this.parent().find('div.sBSTreeWrapper input').attr('name',''); $this.find('input').attr('name','btns_images'); });
            $('div.sSNTreeWrapper input').prop('checked','checked');
            $('div.sSNTreeWrapper span').click(function(){ $this = $(this); var isChecked = $this.parent().find('input').prop('checked'); $this.parent().find('input').prop('checked', !isChecked).change(); });
            $('div.sSNTreeWrapper input').change(function(){ $this = $(this); var sn = $this.attr('value'); $('div.sBSTreeWrapper span.sBSNode[data-sn='+sn+']').toggle(); });
            $('div.sNext > span[data-next]').click(function(){ $cStep = $('.sStepPad > div.sActive').next('div').toggleClass('sActive').find('span:nth-child(2)').toggleClass('sActive').parent().prev('div').toggleClass('sActive').find('span:nth-child(2)').toggleClass('sActive');
            $('div.sFormPad > div.sFormPad-Wrapper:not(.sHideAndSeek)').next('div').toggleClass('sHideAndSeek').prev('div').toggleClass('sHideAndSeek'); 
            StepForward($cStep);
            });  
            $('div.sNext > span[data-prev]').click(function(){ $cStep = $('.sStepPad > div.sActive').prev('div').toggleClass('sActive').find('span:nth-child(2)').toggleClass('sActive').parent().next('div').toggleClass('sActive').find('span:nth-child(2)').toggleClass('sActive');
            $('div.sFormPad > div.sFormPad-Wrapper:not(.sHideAndSeek)').prev('div').toggleClass('sHideAndSeek').next('div').toggleClass('sHideAndSeek');       
            });  
            var codeTextNode = document.createTextNode("<div id='sharewallContainer'></div><script src='//sharewall.ru/webmaster-area/getconfig'>"+"</scrip"+"t>");
                document.getElementById('sCodeHere').appendChild(codeTextNode);
            var StepForward = function(e){                
                if($(e).data("sneedsubmit")){
                    $('#SaveConfig').show();
                }
            }
        });
        function formSubmit(){
            $('form input[type="submit"]').click();
        }
        </script>
  {% endblock %}
