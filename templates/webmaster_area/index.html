  {% extends "skeleton.html" %}

  {% block title %}{{ page.title }}{% endblock %}

	{% block content %}
  <div class="sContent-PB">
      <div class="sContainer sMargin-Auto">
          <div class="sH1Wrapper">
              <h1 class="sH1 sFloat-L">{{ page.header }}</h1>
              <span class="sAdd-Circle"></span>
              <div class="sClear-Both"></div>
          </div>        
          <div class="sTableAreas">
              <div class="sTableAreasFieldName">
                  <div class="sTableAreasField"><span>ID</span>
                  </div>
                  <div class="sTableAreasField"><span>Название</span>
                  </div>
                  <div class="sTableAreasField"><span>URL</span>
                  </div>
                  <div class="sTableAreasField"><span>Категории</span>
                  </div>
                  <div class="sTableAreasField"><span>Типы рекламы</span>
                  </div>
                  <div class="sTableAreasField"><span>Действия</span>
                  </div>
              </div>
              {% for a in areas %}
              <div class="sTableAreasCell">
                  <div class="sTableAreasField"><span>{{ a.pk }}</span>
                  </div>
                  <div class="sTableAreasField"><a>{{ a.name_area }}</a>
                  </div>
                  <div class="sTableAreasField"><a target="_blank" href="//{{ a.url }}">{{ a.url }}</a>
                  </div>
                  <div class="sTableAreasField"><span>{{ a.area_category }}</span>
                  </div>
                  <div class="sTableAreasField"><span>{{ a.get_ad_type_display }}</span>
                  </div>
                  <div class="sTableAreasField">
                      <span class="sAreaEdit"></span>
                      <a href="/webmaster-area/delete/{{ a.pk }}/" class="sAreaDelete"></a>
                  </div>
              </div>
              {% endfor %}
          </div>         
          <form id="create_form" style="display:none; opacity:0;" method="post" action="/webmaster-area/create/">
              {% csrf_token %}
              <input type="submit" />
          </form>
          <div class="sAddAreaModal">
              <div class="sH1">Добавление площадки</div>
              <div class="sAddAreaWrapper">  
                  <div class="sFloat-L">
                      <label for="add_name_area">Название</label>
                      <label for="add_url">URL</label> 
                      <label for="add_category">Категории</label>
                      <label for="add_ad_type">Типы рекламы</label>
                  </div>
                  <div class="sFloat-L">  
                       <div>                       
                            <input form="create_form" id="add_name_area" type="text" pattern="[^?#%]+$" name="name_area" value="" maxlength="200" required>
                        </div> 
                        <div>        
                            <input form="create_form" id="add_url" type="url" name="url" value="" required>
                        </div> 
                        <div>                           
                          <select form="create_form" id="add_category" name="area_category" size="{{ area_category.count }}" multiple required>
                                {% for a in area_category %}
                                <option value="{{ a.pk }}">{{ a.name }}</option>
                                {% endfor %}
                            </select>
                        </div> 
                        <div>                           
                            <select form="create_form" id="add_ad_type" name="ad_type" required>
                                <option value="NORM">Нормальный</option>
                                <option value="ADUL">Для взрослых</option>
                            </select>
                        </div> 
                  </div>                
                  <div class="sClear-Both"></div>
                  <span onclick="formSubmit()" class="sAddAreaSubmit sMargin-Auto"></span>
              </div>
          </div>
      </div>
  </div>
	{% endblock %}

  {% block footer_script %}

        <script>
            function formSubmit(){
                $('form input[type="submit"]').click();
            }
            $(function(){
                $('div.sH1Wrapper span.sAdd-Circle').click(function(){ $('div.sAddAreaModal').toggle(); });
                $('.sAddAreaWrapper > div:nth-child(1) > label:nth-child(4)').css('padding-top', $('select#add_category').attr('size') * 30);
                if(location.search.indexOf('?create') != -1){
                    $('div.sH1Wrapper span.sAdd-Circle').click(); 
                }
            });            
        </script>

  {% endblock %}
